
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="代码狗的狗窝">
    <title>spring-beans使用 - 代码狗的狗窝</title>
    <meta name="author" content="fantiq">
    
    
    
    <meta name="description" content="在spring框架中其核心功能是IoC的实现，Spring实现IoC靠的是组件 spring-beans ，搞清楚 beans 的原理有利于理解 spring 框架的设计思路。Beans是对类如何实例化的定义，这些定义是通过配置的形式提现的，spring目前支持的定义格式有 Properties Groovy XML 以及后来在组件 spring-context 中通过 注解 的实现形式。容器的本">
<meta name="keywords" content="java,spring,beans">
<meta property="og:type" content="blog">
<meta property="og:title" content="spring-beans使用">
<meta property="og:url" content="/2019/08/06/spring-beans使用/index.html">
<meta property="og:site_name" content="代码狗的狗窝">
<meta property="og:description" content="在spring框架中其核心功能是IoC的实现，Spring实现IoC靠的是组件 spring-beans ，搞清楚 beans 的原理有利于理解 spring 框架的设计思路。Beans是对类如何实例化的定义，这些定义是通过配置的形式提现的，spring目前支持的定义格式有 Properties Groovy XML 以及后来在组件 spring-context 中通过 注解 的实现形式。容器的本">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2019-08-09T06:24:16.756Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="spring-beans使用">
<meta name="twitter:description" content="在spring框架中其核心功能是IoC的实现，Spring实现IoC靠的是组件 spring-beans ，搞清楚 beans 的原理有利于理解 spring 框架的设计思路。Beans是对类如何实例化的定义，这些定义是通过配置的形式提现的，spring目前支持的定义格式有 Properties Groovy XML 以及后来在组件 spring-context 中通过 注解 的实现形式。容器的本">
    
    
        
    
    
        <meta property="og:image" content="/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-ejlztp1tasruqfvoz6xmgqng0anzae8ox7cqjj5yibieqgcmhe9fwxfae6zj.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">代码狗的狗窝</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg"/>
            </a>
            <span class="sidebar-profile-name">fantiq</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">搜索</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">关于</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="https://github.com/fantiq"
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            spring-beans使用
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Tue Aug 06 2019 16:32:22 GMT+0800">
	
		    8月 06, 2019
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/spring/">spring</a>


    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>在spring框架中其核心功能是IoC的实现，Spring实现IoC靠的是组件 <code>spring-beans</code> ，搞清楚 beans 的原理有利于理解 spring 框架的设计思路。<br>Beans是对类如何实例化的定义，这些定义是通过配置的形式提现的，spring目前支持的定义格式有 <code>Properties</code> <code>Groovy</code> <code>XML</code> 以及后来在组件 <code>spring-context</code> 中通过 <code>注解</code> 的实现形式。容器的本质是一个HashMap 用于存储对象实例化后的地址 或者 存储如何实例化对象的数据(配置)。</p>
<a id="more"></a>
<h2 id="1-spring-beans-整体概览"><a href="#1-spring-beans-整体概览" class="headerlink" title="1 spring-beans 整体概览"></a>1 spring-beans 整体概览</h2><h4 id="1-1-容器的基本信息"><a href="#1-1-容器的基本信息" class="headerlink" title="1.1 容器的基本信息"></a>1.1 容器的基本信息</h4><p>在 <code>spring-beans</code> 组件中作为容器的类是 <code>org.springframework.beans.factory.support.DefaultListableBeanFactory</code>, 其提供方法 <code>public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) throws BeanDefinitionStoreException</code> 用来注册对象信息到容器，提供方法 <code>public Object getBean(String name) throws BeansException</code> 读取对象（这个方法是其从父类中继承过来的）。</p>
<p>容器中的HashMap定义如下：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">private</span> final <span class="meta">Map</span>&lt;<span class="keyword">String, </span><span class="keyword">BeanDefinition&gt; </span><span class="keyword">beanDefinitionMap </span>= new ConcurrentHashMap(<span class="number">256</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>组件 <code>spring-beans</code> 提供了对应的配置文件的解析类完成容器中的注册过程，这些类都继承了 <code>org.springframework.beans.factory.support.AbstractBeanDefinitionReader</code>。他们通过解析队形格式的配置文件 获取到实例化类过程的定义，并将这些数据包装成 <code>BeanDefine</code> 对象，最终通过方法 <code>registerBeanDefinition</code> 存储到容器的 HashMap中。<br>如下是这些类的清单：</p>
<table>
<thead>
<tr>
<th>类</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>org.springframework.beans.factory.xml.XmlBeanDefinitionReader</td>
<td>解析xml格式的配置</td>
</tr>
<tr>
<td>org.springframework.beans.factory.groovy.GroovyBeanDefinitionReader</td>
<td>groovy格式的配置形式</td>
</tr>
<tr>
<td>org.springframework.beans.factory.support.PropertiesBeanDefinitionReader</td>
<td>properties格式的配置形式</td>
</tr>
</tbody>
</table>
<h4 id="1-2-一个简单的容器注入以及获取实例化对象的例子"><a href="#1-2-一个简单的容器注入以及获取实例化对象的例子" class="headerlink" title="1.2 一个简单的容器注入以及获取实例化对象的例子"></a>1.2 一个简单的容器注入以及获取实例化对象的例子</h4><p>需要实例化的对象<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># java/foo/bar/BeanStub.java</span></span><br><span class="line"><span class="keyword">package</span> foo.bar;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeanStub</span></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>实例化过程的配置<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># resources/beans.xml</span></span><br><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean <span class="built_in">id</span>=<span class="string">"beanStub"</span> <span class="built_in">class</span>=<span class="string">"foo.bar.BeanStub"</span> /&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<p>注册以及实例化过程<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># java/foo/bar/Client.java</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.<span class="keyword">factory</span>.support.DefaultListableBeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.<span class="keyword">factory</span>.xml.XmlBeanDefinitionReader;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.ClassPathResource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.Resource;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">    <span class="comment">// 实例化容器</span></span><br><span class="line">    DefaultListableBeanFactory <span class="keyword">factory</span> = <span class="keyword">new</span> DefaultListableBeanFactory();</span><br><span class="line">    <span class="comment">// 实例化XML格式配置文件解析对象</span></span><br><span class="line">    XmlBeanDefinitionReader reader = <span class="keyword">new</span> XmlBeanDefinitionReader(<span class="keyword">factory</span>);</span><br><span class="line">    <span class="comment">// 加载配置文件并解析 最终注册到容器</span></span><br><span class="line">    Resource resource = <span class="keyword">new</span> ClassPathResource(<span class="string">"beans.xml"</span>);</span><br><span class="line">    reader.loadBeanDefinitions(resource);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过id从容器中获取实例化对象</span></span><br><span class="line">    System.out.println(<span class="keyword">factory</span>.getBean(<span class="string">"beanStub"</span>).getClass().getName());</span><br><span class="line">&#125;</span><br><span class="line">---------- result ----------</span><br><span class="line">foo.bar.BeanStub</span><br></pre></td></tr></table></figure></p>
<h4 id="1-3-关于配置文件"><a href="#1-3-关于配置文件" class="headerlink" title="1.3 关于配置文件"></a>1.3 关于配置文件</h4><p>在使用组件 <code>spring-beans</code> 的过程主要就是配置文件的编写，配置文件是用来描述 类被容器实例化的过程，这个过程的重点是类实例化成对象后其属性的值，所以配置文件的描述也是围绕着给对象属性赋值进行的，类实例化后成为对象，同一个类实例化的不同对象之间的区别是他们的属性值。<br>实例化过程的核心就是提供数据给容器，使其实例化的时候将设置的值设置到对象的属性上，配置文件的配置过程也是基于此展开的。</p>
<p>在面向对象的设计中，构造方法就是提供一个对外的接口给对象的属性进行初始化，其作为一个方法 内部提供了更多的可能对对象进行构造。在设计模式中对象的构造过程是通过 工厂模式来实现的，工厂模式其实是 构造方法的一个变体，其本质还是调用构造方法，工厂模式 给 调用构造方法之前的时机 提供了代码空间 其实可以理解为是对构造方法的一种扩充形式。</p>
<p>在JAVA中存在 JavaBean 的概念，也就是对象的每一个属性对应一个 getter/setter 方法，对对象属性的操作可以通过这些方法实现，相对于构造方法 这种形式从概念上更明确，函数体中的代码功能是单纯的对对应属性的读写。</p>
<p>以上，对象的构造过程其实是对对象属性值的复制过程，这个过程有两种形式，一个是通过 JavaBean 定义的 getter/setter 方法实现，一个是通过面相对象中提供的构造方法实现，构造方法又可以衍生出 工厂模式的 构造形式。</p>
<h2 id="2-对象实例化的配置"><a href="#2-对象实例化的配置" class="headerlink" title="2 对象实例化的配置"></a>2 对象实例化的配置</h2><p>这里使用XML的形式分析配置，配置的分析过程主要关注点在 功能以及提供的数据，xml形式的配置结构如下:<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;beans&gt;</span></span><br><span class="line">    <span class="section">&lt;bean ..../&gt;</span></span><br><span class="line">    <span class="section">&lt;bean ....&gt;</span></span><br><span class="line">        <span class="section">&lt;....&gt;</span></span><br><span class="line">    <span class="section">&lt;/bean&gt;</span></span><br><span class="line"><span class="section">&lt;/beans&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>由于重点在 标签 <code>&lt;bean&gt;</code> 上面，下面的示例中只写标签 <code>&lt;bean&gt;</code> 。</p>
<p>对容器的操作代，整体的调用形式已在上面的代码例子中给出，下面的示例仅会用到 <code>factory.getBean(&quot;xxxx&quot;)</code> 的形式表示从容器中读取实例化对象，将重点放在验证逻辑上。</p>
<h4 id="2-1-基本配置形式"><a href="#2-1-基本配置形式" class="headerlink" title="2.1 基本配置形式"></a>2.1 基本配置形式</h4><h6 id="2-1-1-必须属性-id-name-class"><a href="#2-1-1-必须属性-id-name-class" class="headerlink" title="2.1.1 必须属性 id name class"></a>2.1.1 必须属性 id name class</h6><p>一个简单的配置形式如下:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"beanName"</span> <span class="attribute">class</span>=<span class="string">"ClassName"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中属性 <code>class</code> 表明了要实例化类的类全名(包括包名)，对于一个bean 这个属性是必须的，只有提供了这个属性值 容器才知道要实例化的类是哪个。</p>
<p>属性 <code>id</code> 和 <code>name</code> 都可以作为一个 bean 的标识 在获取bean的时候使用，他们的区别之处在与下面几条</p>
<ol>
<li>一个 bean 的 <code>id</code> 必须是唯一的 不可与其他 bean 重复，而 <code>name</code> 在同一个配置文件中也是不可重复的 在不同配置文件中允许重复 但是存在后面的定义覆盖前面的定义的情况</li>
<li><code>name</code> 的值中可以使用 <code>` </code>:<code>`,</code> 字符分割值 并将这些分割后的值作为 bean 的别名，而 <code>id</code> 中不会有这样的处理 它的值只能作为一个整体</li>
<li>bean中可以不声明 <code>id</code> <code>name</code> 两个属性，这时候 bean 的 BeanName 取值是类全名</li>
</ol>
<p>举例如下：<br>配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 通过id定义 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"foo"</span> <span class="attr">class</span>=<span class="string">"xxx.xxxx.StubBean0"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 通过name定义 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"bar baz"</span> <span class="attr">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不定义 默认使用类的包全名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span>[] beanNames = <span class="keyword">new</span> <span class="keyword">String</span>[]&#123;<span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="string">"baz"</span>, <span class="string">"xxx.xxxx.StubBean2"</span>&#125;;</span><br><span class="line"><span class="built_in">for</span>(<span class="keyword">String</span> beanName : beanNames) &#123;</span><br><span class="line">    System.out.<span class="built_in">println</span>(beanName+<span class="string">"\t"</span>+factory.getBean(beanName).getClass().getName());</span><br><span class="line">&#125;</span><br><span class="line">---------- result ----------</span><br><span class="line">xxx.xxxx.StubBean0</span><br><span class="line">xxx.xxxx.StubBean1</span><br><span class="line">xxx.xxxx.StubBean1</span><br><span class="line">xxx.xxxx.StubBean2</span><br></pre></td></tr></table></figure></p>
<h6 id="2-1-2-钩子方法-init-method-destroy-method"><a href="#2-1-2-钩子方法-init-method-destroy-method" class="headerlink" title="2.1.2 钩子方法 init-method destroy-method"></a>2.1.2 钩子方法 init-method destroy-method</h6><p>注册完成的bean在实例化的时候 组件提供了两个钩子方法，属性 <code>init-method</code> 定义bean完成实例化后要调用的bean方法，属性 <code>destroy-method</code> 定义当 <code>spring-context</code> 中的 context 关闭的时候要调用的bean方法。<br>举例如下:<br>bean类定义<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">StubBean0</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initHook</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"init hook"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyHook</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"destroy hook"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">"myBean"</span> <span class="class"><span class="keyword">class</span>="<span class="title">xxx</span>.<span class="title">xxxx</span>.<span class="title">StubBean0</span>"</span></span><br><span class="line">      init-<span class="function"><span class="keyword">method</span>=</span><span class="string">"initHook"</span> destroy-<span class="function"><span class="keyword">method</span>=</span><span class="string">"destroyHook"</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">factory.getBean(<span class="string">"myBean"</span>)<span class="comment">;</span></span><br><span class="line">---------- result ----------</span><br><span class="line">init hook</span><br></pre></td></tr></table></figure></p>
<p>这里的验证代码没有使用 conext 所以 destory-method 定义的方法并没有执行</p>
<h6 id="2-1-3-对象构造形式-scope"><a href="#2-1-3-对象构造形式-scope" class="headerlink" title="2.1.3 对象构造形式 scope"></a>2.1.3 对象构造形式 scope</h6><p>scope 属性定义了 bean 在什么样的范围(生命周期)中需要实例化新的对象并返回，其去值见下表</p>
<table>
<thead>
<tr>
<th>值</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>singleton</td>
<td>默认值 单例模式</td>
</tr>
<tr>
<td>prototype</td>
<td>原型模式 每次返回的都是新对象</td>
</tr>
<tr>
<td>request</td>
<td>一次http请求周期中返回新对象</td>
</tr>
<tr>
<td>session</td>
<td></td>
</tr>
<tr>
<td>globalSession</td>
<td></td>
</tr>
<tr>
<td>application</td>
<td></td>
</tr>
<tr>
<td>websocket</td>
</tr>
</tbody>
</table>
<p>举例验证下 <code>singleton</code> <code>prototype</code> 这两个值<br>配置文件<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"myBean0"</span> <span class="attribute">class</span>=<span class="string">"com.javastudy.framework.ioc.springbeans.StubBean0"</span> <span class="attribute">scope</span>=<span class="string">"singleton"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"myBean1"</span> <span class="attribute">class</span>=<span class="string">"com.javastudy.framework.ioc.springbeans.StubBean0"</span> <span class="attribute">scope</span>=<span class="string">"prototype"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="keyword">factory</span>.getBean(<span class="string">"myBean0"</span>) == <span class="keyword">factory</span>.getBean(<span class="string">"myBean0"</span>));</span><br><span class="line">System.out.println(<span class="keyword">factory</span>.getBean(<span class="string">"myBean1"</span>) == <span class="keyword">factory</span>.getBean(<span class="string">"myBean1"</span>));</span><br><span class="line">---------- result ----------</span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure></p>
<h4 id="2-2-提供构造参数"><a href="#2-2-提供构造参数" class="headerlink" title="2.2 提供构造参数"></a>2.2 提供构造参数</h4><h6 id="2-2-1-通过getter-setter实例化"><a href="#2-2-1-通过getter-setter实例化" class="headerlink" title="2.2.1 通过getter/setter实例化"></a>2.2.1 通过getter/setter实例化</h6><p>对于符合JavaBean概念的类，在实例化的时候可以通过其 setter 方法给属性赋值，在配置文件中使用标签 <code>&lt;property&gt;</code>。标签 <code>&lt;property&gt;</code> 作为标签 <code>&lt;bean&gt;</code> 的子元素使用，其属性 <code>name</code> 对应的是类属性的名称, 其属性 <code>value</code> 对应的是属性的值。对于属性的值 也可以在 此标签的子元素 使用标签 <code>&lt;value&gt;</code> 声明，且标签 <code>&lt;value&gt;</code> 提供属性 <code>type</code> 用以说明值的类型， 如下例子是等价的:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用属性 value 声明值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"fantasy"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用标签value声明值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>fantasy<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用标签value声明值 且使用属性 type 注明值的类型 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span>&gt;</span>fantasy<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>以上声明形式只能用与 简单变量类型，如果是集合的类型则不适用，需要使用如下形式<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HashMap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"xx"</span> <span class="attr">value</span>=<span class="string">"xx"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"yy"</span> <span class="attr">value</span>=<span class="string">"yy"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"zz"</span> <span class="attr">value</span>=<span class="string">"zz"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- List --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>x<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>y<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>z<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Set --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"set"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>x<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>y<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>z<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>其中的标签 <code>&lt;map&gt;</code> <code>&lt;entry&gt;</code> 中还可以使用属性 <code>key-type</code> <code>value-type</code> 类声明HashMap对应的 key value 的数据类型，这两个属性也同样可以应用到标签 <code>&lt;list&gt;</code> <code>&lt;set&gt;</code> 中</p>
<p>还有一些特殊的类型<br>如果你要给属性赋值为 <code>null</code> 应该这么写<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"name"</span>&gt;</span><br><span class="line">    &lt;null/&gt;</span><br><span class="line">&lt;/<span class="keyword">property</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>如果属性的类型是对象，这个对象就必须是一个bean，并用如下的形式声明<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"foo"</span> <span class="attr">class</span>=<span class="string">"xxx.xxxx.Foo"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bar"</span> <span class="attr">class</span>=<span class="string">"xxx.xxxx.Bar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pFoo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"foo"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 或者写成如下形式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pFoo"</span> <span class="attr">ref</span>=<span class="string">"foo"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>关于属性依赖其他bean的情况 下面段落会 集中讲解。</p>
<p>举例如下<br>bean类定义<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">class StubBean0&#123;</span><br><span class="line">    <span class="built_in">int</span> id;</span><br><span class="line">    <span class="keyword">String</span> name;</span><br><span class="line">    <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; skill;</span><br><span class="line">    Set&lt;<span class="keyword">String</span>&gt; tags;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> getId() &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> setId(<span class="built_in">int</span> id) &#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> setName(<span class="keyword">String</span> name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; getSkill() &#123;</span><br><span class="line">        <span class="keyword">return</span> skill;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> setSkill(<span class="keyword">HashMap</span>&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; skill) &#123;</span><br><span class="line">        <span class="keyword">this</span>.skill = skill;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;<span class="keyword">String</span>&gt; getTags() &#123;</span><br><span class="line">        <span class="keyword">return</span> tags;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> setTags(Set&lt;<span class="keyword">String</span>&gt; tags) &#123;</span><br><span class="line">        <span class="keyword">this</span>.tags = tags;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myBean0"</span> <span class="attr">class</span>=<span class="string">"com.javastudy.framework.ioc.springbeans.StubBean0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"10012"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"fantasy"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"skill"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"php"</span> <span class="attr">value</span>=<span class="string">"10"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"clang"</span> <span class="attr">value</span>=<span class="string">"8"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"java"</span> <span class="attr">value</span>=<span class="string">"6"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"golang"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"tags"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>PMP<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Develop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Architect<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Expert<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">StubBean0 stubBean0 = (StubBean0) factory.getBean(<span class="string">"myBean0"</span>);</span><br><span class="line">System.out.println(stubBean0.getId() + <span class="string">"\t"</span> + stubBean0.getName());</span><br><span class="line">System.out.println(stubBean0.getSkill());</span><br><span class="line">System.out.println(stubBean0.getTags());</span><br><span class="line">---------- result ----------</span><br><span class="line">10012   fantasy</span><br><span class="line">&#123;<span class="attribute">php</span>=10, <span class="attribute">clang</span>=8, <span class="attribute">java</span>=6, <span class="attribute">golang</span>=2&#125;</span><br><span class="line">[PMP, Develop, Architect, Expert]</span><br></pre></td></tr></table></figure></p>
<h6 id="2-2-2-继承属性值"><a href="#2-2-2-继承属性值" class="headerlink" title="2.2.2 继承属性值"></a>2.2.2 继承属性值</h6><p>在配置文件中定义的是一个个的bean 这些bean中定义了属性的初始值，<code>spring-beans</code> 提供了一种继承这些属性值声明的方法，方便我们在定义bean的时候能够复用一些属性值的定义。可以使用标签 <code>&lt;bean&gt;</code> 中的属性 <code>parent</code> 其值就是需要继承属性定义的bean的name。</p>
<p>用法举例<br>bean类定义：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean1</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean2</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件定义：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"parent"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"id"</span> value=<span class="string">"20"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"children"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span> parent=<span class="string">"parent"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"name"</span> value=<span class="string">"fantiq"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">StubBean2 stubBean2 = (StubBean2) factory.getBean(<span class="string">"children"</span>);</span><br><span class="line">System.<span class="keyword">out</span>.println(stubBean2.getName() + <span class="string">"\t"</span> + stubBean2.getId());</span><br><span class="line"><span class="comment">---------- result ----------</span></span><br><span class="line">fantiq  <span class="number">20</span></span><br></pre></td></tr></table></figure></p>
<p>以上例子是在 bean <code>children</code> 中的属性的定义 继承了 bean <code>parent</code> 中的属性定义，如果属性有冲突 则会用继承bean的属性值覆盖被继承bean的属性值。这个例子中的父bean对应的是一个实际的类，也可以使用一个不对应类的bean定义 此时这个bean 需要声明成抽象的 <code>abstract=&quot;true&quot;</code> ，不可以通过 getBean实例化这个bean，其配置文件可以写成下面样子:<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"parent"</span> abstract=<span class="string">"true"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"id"</span> value=<span class="string">"220"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"children"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx..StubBean2"</span> parent=<span class="string">"parent"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"name"</span> value=<span class="string">"fantiq"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>抽象的 bean 不能被实例化 自然不用定义<code>class</code> 属性，抽象bean的定义主要就是建立一个 属性初始值定义的模版。</p>
<h6 id="2-2-3-通过构造方法实例化"><a href="#2-2-3-通过构造方法实例化" class="headerlink" title="2.2.3 通过构造方法实例化"></a>2.2.3 通过构造方法实例化</h6><p>构造方法创建对象的方式与通过 setter方法创建的形式很相似，只不过构造方法使用标签 <code>&lt;constructor-arg&gt;</code> 声明参数，构造方法的声明形式与属性的声明形式是一样的。构造方法的形式是将定义的这些值传递给构造方法，由构造方法内部代码决定如何处理这些值。</p>
<h6 id="2-2-4-通过工厂模式实例化"><a href="#2-2-4-通过工厂模式实例化" class="headerlink" title="2.2.4 通过工厂模式实例化"></a>2.2.4 通过工厂模式实例化</h6><p>工厂模式是构造方法的一个变种，工厂模式又可以分为两种形式<br>一种是基于当前bean的方法创建对象，方法必须是静态的 因为方法要在对象创建前调用。通过属性 <code>factory-method</code> 定义实例化bean使用的静态方法，配置形式如下:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"main"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.Stub"</span> <span class="attribute">factory-method</span>=<span class="string">"selfFactoryMethod"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>另一种是调用其他bean中的方法，此时方法没有要求必须是静态，因为其他的bean需要先实例化的。使用属性 <code>factory-bean</code> 定义实例化bean要使用的已经实例化的BeanName，使用属性 <code>factory-method</code> 定义对应 BeanName中的方法名字, 配置形式如下:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"factory"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubFactory"</span> /&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"main"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.Stub"</span> <span class="attribute">factory-bean</span>=<span class="string">"factory"</span> <span class="attribute">factory-method</span>=<span class="string">"thirdFactoryMethod"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>工厂方法不用必须返回指定类型的对象，他可以返回任何类型 但不能是 void。</p>
<p>也可以给工厂方法传递参数，配置形式如同构造方法的配置形式。</p>
<p>bean 类定义<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bean 内部的静态工厂方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">StubBean1</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> boolean <span class="title">factory</span>(<span class="params">String name</span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"self static factory method get args: "</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 外部工厂方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">StubBean2</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> boolean <span class="title">factoryThird</span>(<span class="params">String name</span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"third factory method get args:"</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"myBeans1"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span> factory-method=<span class="string">"factory"</span>&gt;</span><br><span class="line">    &lt;constructor-arg <span class="built_in">name</span>=<span class="string">"name"</span> value=<span class="string">"foo"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"factoryClass"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span>/&gt;</span><br><span class="line">        &lt;bean <span class="built_in">id</span>=<span class="string">"myBeans2"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span> factory-bean=<span class="string">"factoryClass"</span> factory-method=<span class="string">"factoryThird"</span>&gt;</span><br><span class="line">    &lt;constructor-arg <span class="built_in">name</span>=<span class="string">"name"</span> value=<span class="string">"bar"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">factory</span>.getBean(<span class="string">"myBeans1"</span>);</span><br><span class="line"><span class="keyword">factory</span>.getBean(<span class="string">"myBeans2"</span>);</span><br><span class="line">---------- result ----------</span><br><span class="line">self <span class="keyword">static</span> <span class="keyword">factory</span> method <span class="keyword">get</span> args: foo</span><br><span class="line">third <span class="keyword">factory</span> method <span class="keyword">get</span> args:bar</span><br></pre></td></tr></table></figure></p>
<h4 id="2-3-依赖关系"><a href="#2-3-依赖关系" class="headerlink" title="2.3 依赖关系"></a>2.3 依赖关系</h4><h6 id="2-3-1-依赖的声明形式-ref"><a href="#2-3-1-依赖的声明形式-ref" class="headerlink" title="2.3.1 依赖的声明形式 ref"></a>2.3.1 依赖的声明形式 ref</h6><p>上面讲了两种主要的给类对象添加属性的方式，一种是通过 getter/setter 方法 一种是通过构造方法。在定义属性值的时候存在多种情况，如果是基本的数据类型的话，比如 <code>Integer</code> <code>String</code> <code>Boolean</code> <code>int</code> <code>double</code> <code>boolean</code> 这些基本类型可以直接通过 标签 <code>&lt;property&gt;</code> 或 <code>&lt;constructor-arg&gt;</code> 的属性 <code>name</code> <code>value</code> 实现值的定义。若是 <code>Map</code> <code>List</code> <code>Set</code> 这种复杂类型的值 则需要通过对应的标签 <code>&lt;map&gt;&lt;entry key=&quot;&quot; value=&quot;&quot;&gt;&lt;....&gt;&lt;/map&gt;</code> <code>&lt;list&gt;&lt;value&gt;xxxxxx&lt;/value&gt;&lt;/list&gt;</code> <code>&lt;set&gt;&lt;value&gt;xxxxxx&lt;/value&gt;&lt;/set&gt;</code> 定义值。</p>
<p>还有一种值是对象地址，也就是说 类A的属性值的类型是 类B，在组件 <code>spring-beans</code> 中所有的对象都被定义为一个 <code>bean</code> ，那么定义的类构造过程中 属性类型是类的话 也应该是一个bean。对于这样的定义 可以使用属性 <code>ref</code> 其值对应的是要依赖的对象的BeanName。</p>
<p>举例如下</p>
<p>bean类定义<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean1</span></span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean2</span></span>&#123;</span><br><span class="line">    StubBean1 stubBean1;</span><br><span class="line">    StubBean2(StubBean1 depend) &#123;</span><br><span class="line">        <span class="keyword">this</span>.stubBean1 = depend;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"dependBean"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span>/&gt;</span><br><span class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"myBean"</span> <span class="built_in">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span>&gt;</span><br><span class="line">    &lt;constructor-arg <span class="built_in">name</span>=<span class="string">"depend"</span> <span class="keyword">ref</span>=<span class="string">"dependBean"</span> /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">StubBean2 stubBean2 = (StubBean2) factory.getBean(<span class="string">"myBean"</span>)<span class="comment">;</span></span><br><span class="line">System.out.println(stubBean2.stubBean1.getClass().getName())<span class="comment">;</span></span><br><span class="line">---------- result ----------</span><br><span class="line">xxx.xxxx.StubBean1</span><br></pre></td></tr></table></figure></p>
<p>以上的例子是通过构造方法的形式进行依赖的，如果是属性的形式 做法也一样。</p>
<p>以上属性值类型是类的情况，定义形式由如下两种等价的方式<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="function"><span class="keyword">constructor</span>-<span class="title">arg</span> <span class="title">name</span>="<span class="title">depend</span>" <span class="title">ref</span>="<span class="title">dependBean</span>" /&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&lt;<span class="title">constructor</span>-<span class="title">arg</span> <span class="title">name</span>="<span class="title">depend</span>"&gt;</span></span><br><span class="line"><span class="function">    &lt;<span class="title">ref</span> <span class="title">bean</span>="<span class="title">dependBean</span>"/&gt;</span></span><br><span class="line"><span class="function">&lt;/<span class="title">constructor</span>-<span class="title">arg</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h6 id="2-3-2-依赖的声明形式-depends-on"><a href="#2-3-2-依赖的声明形式-depends-on" class="headerlink" title="2.3.2 依赖的声明形式 depends-on"></a>2.3.2 依赖的声明形式 depends-on</h6><p>上一节说明了属性值是对象(bean) 情况该如何定义，这个在IoC概念中被称作 <code>依赖</code>，其实可以理解为是对属性值的定义。标签 <code>&lt;bean&gt;</code> 中存在属性 <code>depends-on</code> ，用以声明 bean 在被实例化的时候需要将 属性 <code>depends-on</code> 中列出来的 BeanNames 先实例化。</p>
<p>举例使用如下</p>
<p>bean类定义：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">StubBean1</span>&#123;</span><br><span class="line">    StubBean1() &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"StubBean1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">StubBean2</span>&#123;</span><br><span class="line">    StubBean2() &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"StubBean2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">StubBean3</span>&#123;</span><br><span class="line">    StubBean3() &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"StubBean3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"dependBean1"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"dependBean2"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"myBean"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean3"</span> <span class="attribute">depends-on</span>=<span class="string">"dependBean1 dependBean2"</span> /&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">factory.getBean(<span class="string">"myBean"</span>)<span class="comment">;</span></span><br><span class="line">---------- result ----------</span><br><span class="line">StubBean1</span><br><span class="line">StubBean2</span><br><span class="line">StubBean3</span><br></pre></td></tr></table></figure></p>
<p><code>depends-on</code> 与 <code>ref</code> 的区别：<br><code>ref</code> 是用于明确的定义 属性或构造方法参数 对应值要使用的 BeanName<br><code>depends-on</code> 是用于说明 众多的 bean 实例化的先后顺序</p>
<h6 id="2-3-3-依赖自动判断-autowire"><a href="#2-3-3-依赖自动判断-autowire" class="headerlink" title="2.3.3 依赖自动判断 autowire"></a>2.3.3 依赖自动判断 autowire</h6><p>对于bean属性值类型是 类 的情况，可以通过属性 <code>ref</code> 显性的配置，还有一种属性 <code>autowire</code> 可以用于自动识别 bean 中属性值对应的应该是 容器中的哪个 bean。autowire 提供的值主要有两个 <code>byName</code> 和 <code>byType</code>，<code>byName</code> 通过要实例化的bean属性名字 与 容器中定义bean的 <code>name</code> <code>id</code> 进行匹配来实现自动的关联，<code>byType</code> 通过要实例化的bean属性定义的类型 与 容器中定义的beans对应类 进行匹配实现自动关联。</p>
<p>这个功能仅适用 实现了 getter/setter 方法的bean，不适用构造方法的形式。</p>
<p>举例如下</p>
<p>bean类定义<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean1</span>&#123;</span> &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean2</span>&#123;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StubBean3</span>&#123;</span></span><br><span class="line">    StubBean1 dependBean1;</span><br><span class="line">    StubBean2 dependBean2;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StubBean1 <span class="title">getDependBean1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dependBean1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDependBean1</span><span class="params">(StubBean1 dependBean1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dependBean1 = dependBean1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StubBean2 <span class="title">getDependBean2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dependBean2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDependBean2</span><span class="params">(StubBean2 dependBean2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dependBean2 = dependBean2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置文件<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"dependBean1"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"dependBean2"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"myBean"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean3"</span> <span class="attribute">autowire</span>=<span class="string">"byName"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p>验证代码<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">StubBean3 stubBean3 = (StubBean3) factory.getBean(<span class="string">"myBean"</span>)<span class="comment">;</span></span><br><span class="line">System.out.println(stubBean3.dependBean1.getClass().getName())<span class="comment">;</span></span><br><span class="line">System.out.println(stubBean3.dependBean2.getClass().getName())<span class="comment">;</span></span><br><span class="line">---------- result ----------</span><br><span class="line">xxx.xxxx.StubBean1</span><br><span class="line">xxx.xxxx.StubBean2</span><br></pre></td></tr></table></figure></p>
<p>以上例子 定义的bean <code>&lt;bean id=&quot;xx&quot; class=&quot;xxx&quot; autowire=&quot;byName&quot;/&gt;</code>，此时 bean定义类中属性变量名称与容器中定义的bean名称进行匹配。使用值 <code>byType</code> 则不必匹配BeanName与属性变量名称 只需要属性类型 与 容器中bean对应类的类型 进行匹配就行，上面例子中的配置文件改成如下形式也是可以的</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"bean1"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean1"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"bean2"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean2"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"myBean"</span> <span class="attribute">class</span>=<span class="string">"xxx.xxxx.StubBean3"</span> <span class="attribute">autowire</span>=<span class="string">"byType"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>参考链接:</p>
<blockquote>
<p><a href="https://docs4dev.com/docs/zh/spring-framework/4.3.21.RELEASE/reference/beans.html" target="_blank" rel="noopener">Spring IoC容器</a></p>
</blockquote>

            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/beans/">beans</a> <a class="tag tag--primary tag--small t-link" href="/tags/java/">java</a> <a class="tag tag--primary tag--small t-link" href="/tags/spring/">spring</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/08/13/java基础-编译运行原理/"  data-tooltip="java基础-编译运行原理">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/06/25/Linux中程序在shell中的执行过程/" data-tooltip="Linux中程序在shell中的执行过程">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/08/06/spring-beans使用/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/08/06/spring-beans使用/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/08/06/spring-beans使用/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#ds-thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="ds-thread" class="ds-thread" data-thread-key="2019/08/06/spring-beans使用/"
     data-title="spring-beans使用" data-url="/2019/08/06/spring-beans使用/">
</div>

            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 fantiq. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/08/13/java基础-编译运行原理/"  data-tooltip="java基础-编译运行原理">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/06/25/Linux中程序在shell中的执行过程/" data-tooltip="Linux中程序在shell中的执行过程">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/08/06/spring-beans使用/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/08/06/spring-beans使用/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/08/06/spring-beans使用/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#ds-thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=/2019/08/06/spring-beans使用/">
                <i class="fa fa-google-plus"></i><span class="">分享到 Google+</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/08/06/spring-beans使用/">
                <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=/2019/08/06/spring-beans使用/">
                <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg"/>
        
            <h4 id="about-card-name">fantiq</h4>
        
            <h5 id="about-card-bio"><p> good at develop framework </p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>developer</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/scrip-gfmrkxcl0qohe3cfdgxhzvc0yrceqta8i4iix0txvn8q4o2adlqd5n0jmkvt.min.js"></script>
<!--SCRIPTS END-->

    
        <script type="text/javascript">
            var duoshuoQuery = {short_name:'fantiq'};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        </script>
    



</html>
