
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="代码狗的狗窝">
    <title>利用apidoc设计文档自动生成方案 - 代码狗的狗窝</title>
    <meta name="author" content="fantiq">
    
    
    
    <meta name="description" content="使用apidoc 可以通过分析代码中的注释生成文档，由于apidoc生成的文档是一个单文件多人开发过程中会导致文件的覆盖，可以通过git 代码分支合并的时候通过钩子(web hook)生成文档到文档服务器文档服务器通过samba 服务 实现代码服务器将生成的文档写入文档服务器。由于是静态文件可以使用node 来跑这样避免多项目的时候 需要在文档服务器绑定不同的域名来实现单台文档服务器跑多个项目的接">
<meta property="og:type" content="blog">
<meta property="og:title" content="利用apidoc设计文档自动生成方案">
<meta property="og:url" content="/2016/09/10/利用apidoc设计文档自动生成方案/index.html">
<meta property="og:site_name" content="代码狗的狗窝">
<meta property="og:description" content="使用apidoc 可以通过分析代码中的注释生成文档，由于apidoc生成的文档是一个单文件多人开发过程中会导致文件的覆盖，可以通过git 代码分支合并的时候通过钩子(web hook)生成文档到文档服务器文档服务器通过samba 服务 实现代码服务器将生成的文档写入文档服务器。由于是静态文件可以使用node 来跑这样避免多项目的时候 需要在文档服务器绑定不同的域名来实现单台文档服务器跑多个项目的接">
<meta property="og:updated_time" content="2016-09-13T05:46:31.533Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="利用apidoc设计文档自动生成方案">
<meta name="twitter:description" content="使用apidoc 可以通过分析代码中的注释生成文档，由于apidoc生成的文档是一个单文件多人开发过程中会导致文件的覆盖，可以通过git 代码分支合并的时候通过钩子(web hook)生成文档到文档服务器文档服务器通过samba 服务 实现代码服务器将生成的文档写入文档服务器。由于是静态文件可以使用node 来跑这样避免多项目的时候 需要在文档服务器绑定不同的域名来实现单台文档服务器跑多个项目的接">
    
    
        
    
    
        <meta property="og:image" content="/assets/images/avatar.jpg"/>
    
    
        <meta property="og:image" content="/2016/09/10/利用apidoc设计文档自动生成方案/logo.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="/2016/09/10/利用apidoc设计文档自动生成方案/logo.png" />
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-ejlztp1tasruqfvoz6xmgqng0anzae8ox7cqjj5yibieqgcmhe9fwxfae6zj.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">代码狗的狗窝</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg"/>
            </a>
            <span class="sidebar-profile-name">fantiq</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">搜索</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">关于</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="https://github.com/fantiq"
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            利用apidoc设计文档自动生成方案
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Sat Sep 10 2016 19:11:40 GMT+0800">
	
		    9月 10, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/架构/">架构</a>, <a class="category-link" href="/categories/架构/api/">api</a>


    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>使用<code>apidoc</code> 可以通过分析代码中的注释生成文档，由于<code>apidoc</code>生成的文档是一个单文件<br>多人开发过程中会导致文件的覆盖，可以通过<code>git</code> 代码分支合并的时候通过钩子(web hook)生成文档到文档服务器<br>文档服务器通过<code>samba</code> 服务 实现代码服务器将生成的文档写入文档服务器。由于是静态文件可以使用<code>node</code> 来跑<br>这样避免多项目的时候 需要在文档服务器绑定不同的域名来实现单台文档服务器跑多个项目的接口文档的麻烦<br><a id="more"></a></p>
<h1 id="1-环境安装"><a href="#1-环境安装" class="headerlink" title="1. 环境安装"></a>1. 环境安装</h1><h4 id="1-1-node-apidoc"><a href="#1-1-node-apidoc" class="headerlink" title="1.1 node + apidoc"></a>1.1 node + apidoc</h4><p>apidoc 是node的一个工具 需要先安装node才能使用</p>
<h6 id="1-1-1-安装node"><a href="#1-1-1-安装node" class="headerlink" title="1.1.1 安装node"></a>1.1.1 安装node</h6><p>下载win64安装文件<a href="https://nodejs.org/dist/v4.4.3/node-v4.4.3-x64.msi" target="_blank" rel="external">下载地址</a> (这里忽略加入PATH的操作 如果需要自行添加)<br>命令行输入 <code>node -v</code> 显示版本号 表示你以成功安装 node</p>
<h6 id="1-1-2-安装apidoc"><a href="#1-1-2-安装apidoc" class="headerlink" title="1.1.2 安装apidoc"></a>1.1.2 安装apidoc</h6><p>通过 node 的包管理工具 <code>npm</code> 安装 <code>npm install apidoc -g</code><br>执行命令<code>apidoc --help</code> 命令识别标识安装成功<br><strong>apidoc命令没有提供查询版本的参数(个人没有发现)</strong></p>
<h4 id="1-2-samba-服务"><a href="#1-2-samba-服务" class="headerlink" title="1.2 samba 服务"></a>1.2 samba 服务</h4><p>为了生成文件方便 使用<code>samba</code>服务 具体安装方法 <a href="/2016/06/07/linux-centos-samba-%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB/">samba 文件共享</a></p>
<h4 id="1-3-文档自动生成"><a href="#1-3-文档自动生成" class="headerlink" title="1.3 文档自动生成"></a>1.3 文档自动生成</h4><p>为了避免 各自生成文档 导致文件覆盖的情况，文档生成的操作不开放给开发者<br>当然开发者可以生成到本地来检查代码文档注释是否ok<br>我们在使用<code>git</code>做版本控制的时候 开发分支是隔离的，一般会有<code>master</code> <code>release</code> <code>dev</code> 三个主分支<br>开发者开发完毕会将代码合并到<code>dev</code>分支跟客户端对接联调，可以在分支合并处 通过钩子生成文档到文档服务器(一般也会在合并分支的时候通过 jenkins 自动构建代码)</p>
<h1 id="2-apidoc-使用简介"><a href="#2-apidoc-使用简介" class="headerlink" title="2. apidoc 使用简介"></a>2. apidoc 使用简介</h1><p>apidoc 官网地址 <a href="http://apidocjs.com/" target="_blank" rel="external">apidoc 官网</a><br>注释要使用<strong>标准的块注释</strong> 基本用法举例<br><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * <span class="meta">@api</span> &#123;get&#125; /login 登录</span><br><span class="line"> * <span class="meta">@apiGroup</span> User</span><br><span class="line"> * <span class="meta">@apiName</span> getLogin</span><br><span class="line"> * <span class="meta">@apiVersion</span> <span class="number">1.0</span><span class="number">.1</span></span><br><span class="line"> * <span class="meta">@apiDescription</span> 登录接口</span><br><span class="line"> *</span><br><span class="line"> * <span class="meta">@apiExample</span> 作者</span><br><span class="line"> * Aimee Aimee<span class="meta">@example</span>.com</span><br><span class="line"> *</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">String</span>&#125; username 用户名</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">String</span>&#125; password 密码</span><br><span class="line"> * <span class="meta">@apiParamExample</span> http</span><br><span class="line"> * /login?username=fantiq&amp;passwoed=<span class="number">123456</span></span><br><span class="line"> * <span class="meta">@apiSuccess</span> &#123;<span class="built_in">String</span>&#125; code=<span class="number">0</span> 错误码</span><br><span class="line"> * <span class="meta">@apiSuccess</span> &#123;<span class="built_in">String</span>&#125; message='ok' 接口信息</span><br><span class="line"> * <span class="meta">@apiSuccess</span> &#123;Object&#125; data 数据</span><br><span class="line"> * <span class="meta">@apiSuccessExample</span> json 返回值</span><br><span class="line"> * &#123;</span><br><span class="line"> *      <span class="string">"code"</span> : <span class="number">0</span>,</span><br><span class="line"> *      <span class="string">"message"</span> : <span class="string">"ok"</span>,</span><br><span class="line"> *      <span class="string">"data"</span> : []</span><br><span class="line"> * &#125;</span><br><span class="line"> * <span class="meta">@apiSampleRequest</span> http://www.example.com/</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></p>
<p>文档生成命令<br><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apidoc -i <span class="string">[代码路径]</span> -o <span class="string">[生成的接口文档静态文件]</span></span><br></pre></td></tr></table></figure></p>
<h1 id="3-apidoc-语法说明"><a href="#3-apidoc-语法说明" class="headerlink" title="3. apidoc 语法说明"></a>3. apidoc 语法说明</h1><h4 id="3-1-基本定义"><a href="#3-1-基本定义" class="headerlink" title="3.1 基本定义"></a>3.1 基本定义</h4><h6 id="3-1-1-api"><a href="#3-1-1-api" class="headerlink" title="3.1.1 @api"></a>3.1.1 @api</h6><blockquote>
<p>@api {method} path name</p>
</blockquote>
<p>定义基本的接口请求方式 这个参数<strong>必须存在</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>method</td>
<td>Http请求方法 <code>GET POST PUT</code> 等，不区分大小写</td>
<td>如果支持多种请求方式可以写成<code>{GET POST}</code> 但这会导致 <code>apiSampleRequest</code> 无法使用</td>
</tr>
<tr>
<td>path</td>
<td>路由</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>接口名称 会显示到文档左侧的导航栏</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单个请求方式</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@api</span> &#123;get&#125; /login 登录</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment"># 多个请求方式</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@api</span> &#123;get post&#125; /login 登录</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
<h6 id="3-1-2-apiGroup"><a href="#3-1-2-apiGroup" class="headerlink" title="3.1.2 @apiGroup"></a>3.1.2 @apiGroup</h6><blockquote>
<p>@apiGroup name</p>
</blockquote>
<p>定义接口的分组 分组定义会显示到文档左侧的主导航栏。但是这个分组的值不支持中文<br>可以通过<code>@apiDefine</code> 的形式来使用中文</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>分组名称</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @apiGroup <span class="keyword">User</span></span><br><span class="line"> <span class="title">*/</span></span><br></pre></td></tr></table></figure></p>
<p>通过apiDefine 使用中文<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiDefine</span> GroupName 中文</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiGroup</span> GroupName</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
<h6 id="3-1-3-apiName"><a href="#3-1-3-apiName" class="headerlink" title="3.1.3 @apiName"></a>3.1.3 @apiName</h6><blockquote>
<p>@apiName name</p>
</blockquote>
<p>定义接口内部名称。<br>默认情况下apidoc会将 请求方式以及路由进行拼接成值 一般不建议设置这个值<br>一个接口在不同版本中<code>请求方式</code>和<code>路由</code>都不会发生变化的时候尽量用默认值<br>如果同一个接口中<code>请求方式</code>和<code>路由</code>在不同版本发生变化 这个定义就会起到作用</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>接口名称 默认是 method+path</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiName</span> GetLogin</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
<h6 id="3-1-4-apiVersion"><a href="#3-1-4-apiVersion" class="headerlink" title="3.1.4 apiVersion"></a>3.1.4 apiVersion</h6><blockquote>
<p>@apiVersion version</p>
</blockquote>
<p>定义接口版本</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>version</td>
<td>支持版本格式 major.minor.patch</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiVersion</span> 1.0.1</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
<h6 id="3-1-5-apiDescription"><a href="#3-1-5-apiDescription" class="headerlink" title="3.1.5 apiDescription"></a>3.1.5 apiDescription</h6><blockquote>
<p>@apiDescription description</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>接口描述</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiDescription</span> 这是一个登录接口</span><br><span class="line"> * 接口调用成功会分发 token</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-2-参数说明"><a href="#3-2-参数说明" class="headerlink" title="3.2 参数说明"></a>3.2 参数说明</h4><p>参数说明定义基本分为两个纬度 <code>参数类型</code> <code>参数形式</code><br>下面通过一个表格说明</p>
<table>
<thead>
<tr>
<th>#</th>
<th>参数字段说明</th>
<th>参数举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>基本参数</td>
<td>@apiParam</td>
<td>@apiParamExample</td>
</tr>
<tr>
<td>请求头</td>
<td>@apiHeader</td>
<td>@apiHeaderExample</td>
</tr>
<tr>
<td>成功</td>
<td>@apiSuccess</td>
<td>@apiSuccessExample</td>
</tr>
<tr>
<td>错误</td>
<td>@apiError</td>
<td>@apiErrorExample</td>
</tr>
</tbody>
</table>
<h6 id="3-2-1-apiParam"><a href="#3-2-1-apiParam" class="headerlink" title="3.2.1 apiParam"></a>3.2.1 apiParam</h6><blockquote>
<p>@apiParam [(group)] [{type{size}}] field descript</p>
</blockquote>
<p>定义参数字段 其中 <code>@apiHeader</code> <code>@apiSuccess</code> <code>@apiError</code> 用法也是如此</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>参数类型 支持的参数类型有<code>String Number Boolean Object String[]</code></td>
<td>定义参数取值范围 <code>{Number{1-999}}</code></td>
</tr>
<tr>
<td>field</td>
<td>参数字段名称</td>
<td>设置默认值 <code>field=defaultValue</code> , 设置为可选项 <code>[field]</code></td>
</tr>
<tr>
<td>descript</td>
<td>参数字段描述</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">String</span>&#125; name 名称</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></p>
<p>参数类型取值范围定义<br><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义2-5个字符</span></span><br><span class="line">/**</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">String</span>&#123;<span class="number">2.</span><span class="number">.5</span>&#125;&#125; name 名称</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">Number</span>&#123;<span class="number">111</span>-<span class="number">999</span>&#125;&#125; id 编号</span><br><span class="line"> */</span><br><span class="line"><span class="comment"># 定义参数的允许值</span></span><br><span class="line">/**</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">String</span>=<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>&#125; name 名称</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">Number</span>=<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125; id 编号</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></p>
<p>参数字段<br><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置参数默认值</span></span><br><span class="line">/**</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">String</span>&#125; name=<span class="string">"zzz"</span> 名称</span><br><span class="line"> */</span><br><span class="line"><span class="comment"># 设置参数为可选值</span></span><br><span class="line">/**</span><br><span class="line"> * <span class="meta">@apiParam</span> &#123;<span class="built_in">Number</span>&#125; [id=<span class="number">1</span>] 编号</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></p>
<h6 id="3-2-2-apiParamExample"><a href="#3-2-2-apiParamExample" class="headerlink" title="3.2.2 apiParamExample"></a>3.2.2 apiParamExample</h6><blockquote>
<p>@apiParamExample [type] title<br>content</p>
</blockquote>
<p>定义参数例子 其中 <code>@apiHeaderExample</code> <code>@apiSuccessExample</code> <code>@apiErrorExample</code> 用法也是如此</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>内容类型 <code>json</code></td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>参数名称</td>
<td></td>
</tr>
<tr>
<td>content</td>
<td>参数例子</td>
</tr>
</tbody>
</table>
<p>使用举例<br><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @apiParamExample json 返回成功</span><br><span class="line"> * &#123;</span><br><span class="line"> *      <span class="string">"code"</span> : <span class="number">0</span>,</span><br><span class="line"> *      <span class="string">"message"</span> : <span class="string">"ok"</span>,</span><br><span class="line"> *      <span class="string">"data"</span> : <span class="string">[]</span></span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></p>
<h4 id="3-3-定义代码块"><a href="#3-3-定义代码块" class="headerlink" title="3.3 定义代码块"></a>3.3 定义代码块</h4><p>定义代码块 <strong>必须</strong> 在独立的注释块中定义</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个常量</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiDefine</span> NAME 张开发</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiGroup</span> NAME</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义代码片段</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiDefine</span> TEST</span><br><span class="line"> * <span class="doctag">@apiSampleRequest</span> http://www.example.com/</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@api</span> &#123;get&#125; /foo/bar</span><br><span class="line"> * <span class="doctag">@apiVersion</span> 1.0.1</span><br><span class="line"> * <span class="doctag">@apiUse</span> TEST</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<h4 id="3-4-其他"><a href="#3-4-其他" class="headerlink" title="3.4 其他"></a>3.4 其他</h4><h6 id="3-4-1-权限"><a href="#3-4-1-权限" class="headerlink" title="3.4.1 权限"></a>3.4.1 权限</h6><h6 id="3-4-2-忽略注释"><a href="#3-4-2-忽略注释" class="headerlink" title="3.4.2 忽略注释"></a>3.4.2 忽略注释</h6><p>代码注释块中有<code>@apiIgnore</code> 声明的话 这个代码块里面的文档注释将不会生成到文档</p>
<blockquote>
<p>建议这个声明写到注释块的头部</p>
<h6 id="3-4-3-接口作者"><a href="#3-4-3-接口作者" class="headerlink" title="3.4.3 接口作者"></a>3.4.3 接口作者</h6><p><code>apidoc</code> 的缺点是没有定义接口作者的地方，一个方法就是利用<code>@apiExample</code> 来定义<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@apiExample</span> 作者</span><br><span class="line"> * 张开发 dev<span class="doctag">@company</span>.com</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="4-文档服务器"><a href="#4-文档服务器" class="headerlink" title="4. 文档服务器"></a>4. 文档服务器</h1><p>建议单独一个服务器跑 文档 ，文档可以通过ip+端口</p>
<!-- 




开发
    目的：制作产品
基础架构
    目的：开发者之间更好的配合 为开发提供便利
    移动端
        Android
        Ios
        Wap
    接口
    运维

    接口之间的开发框架 底层架构
    App之间的底层架构 底层框架
    服务器的架构 项目需要准备的服务
    客户端与后端数据交互标准

运维
    目的：为产品提供需要的环境支持
测试
    目的：发现产品中存在的问题
项目经理
    目的：保证开发产品与设计产品 吻合
    工具：流程图 代码审查
    进度保证 代码质量保证 产品真实度保证
产品经理
    目的：更好的表达请求 产品
    工具：原型图 交互图 设计图 需求文档
    原型图之间的关联 产品流程 必要的文字说明
 -->

            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/apidoc/">apidoc</a> <a class="tag tag--primary tag--small t-link" href="/tags/接口文档/">接口文档</a> <a class="tag tag--primary tag--small t-link" href="/tags/架构/">架构</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/01/01/精-LNMP开发环境搭建/"  data-tooltip="[精]LNMP开发环境搭建">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/10/composer使用指南/" data-tooltip="composer使用指南">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#ds-thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="ds-thread" class="ds-thread" data-thread-key="2016/09/10/利用apidoc设计文档自动生成方案/"
     data-title="利用apidoc设计文档自动生成方案" data-url="/2016/09/10/利用apidoc设计文档自动生成方案/">
</div>

            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 fantiq. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/01/01/精-LNMP开发环境搭建/"  data-tooltip="[精]LNMP开发环境搭建">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/10/composer使用指南/" data-tooltip="composer使用指南">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#ds-thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-google-plus"></i><span class="">分享到 Google+</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=/2016/09/10/利用apidoc设计文档自动生成方案/">
                <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg"/>
        
            <h4 id="about-card-name">fantiq</h4>
        
            <h5 id="about-card-bio"><p> good at develop framework </p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>developer</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/scrip-gfmrkxcl0qohe3cfdgxhzvc0yrceqta8i4iix0txvn8q4o2adlqd5n0jmkvt.min.js"></script>
<!--SCRIPTS END-->

    
        <script type="text/javascript">
            var duoshuoQuery = {short_name:'fantiq'};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        </script>
    



</html>
