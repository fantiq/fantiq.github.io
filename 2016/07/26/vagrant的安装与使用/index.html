
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="代码狗">
    <title>vagrant的安装与使用 - 代码狗</title>
    <meta name="author" content="fantiq">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"fantiq","sameAs":["https://github.com/fantiq"],"image":"avatar.jpg"},"articleBody":"作为统一开发环境的工具 vagrant 是一个类似 docker 的工具但是两者的又有不同的使用场景\n\n本文所在的环境\n123windows 64位 旗舰版vagrant 1.8.5virtualbox 5.0.2\n\n1. vagrant是什么?vagrant 是一个方便操作 virtualbox 的工具实现原理 virtualbox 是开源的 操作对外提供有api vagrant 通过这些api实现对virtual的操作vagrant 一个方便操作虚拟机的工具 \n2. 安装虚拟机 vagrant下载virtualbox下载vagrantvagrant 支持 VMware 虚拟机 但是 VMware 收费 并且 VMware的box文件可下载的也很少 下文只针对 VMware进行讲解\n3. 下载box镜像1234# 通过官网别名安装vagrant box add alias# 通过下载地址 或者 本地box文件路径安装vagrant box add [alias] &lt;url | path&gt;\n镜像地址可以是官方的名称 但是官方的名称就是别名 你不能再通过 –name 指定别名也可以使 url 系在地址 或者 下载box文件到本地 通过指定box文件路径进行安装 (这两个都是可以定义别名的)\n这个命令执行后会在你的用户目录创建一个 .vagrant.d 文件夹 里面的boxes文件夹存储你安装的box相关文件包括网络下载的以及本地导入的 都会存储\n4. 初始化工作目录1vagrant init [alias]\n这时候会在当前目录生成配置文件 Vagrantfile主要配置文件选项\n5. 启动虚拟机对应启动虚拟机时候会遇到如下三个问题\n1 “rsync” could not be found on your PATH错误提示12&quot;rsync&quot; could not be found on your PATH. Make sure that rsyncis properly installed on your system and available on the PATH.\n\n解决方法 (github issue 参考链接)找到 你下载的 box 镜像文件所在路径 一般是 用户目录\\vagrant.d\\boxes\\镜像名称下的目录\\virtualbox\\Vagrantfile 将这段\n1config.vm.synced_folder &quot;.&quot;, &quot;/home/vagrant/sync&quot;, type: &quot;rsync&quot;\n修改成\n1config.vm.synced_folder &quot;你要共享的目录&quot;, &quot;/home/vagrant/sync&quot;, type: &quot;virtualbox&quot;\n或者将这段注释掉\n2 Warning: Authentication failure错误提示123456789101112131415161718192021222324    .......    default: Warning: Authentication failure. Retrying...    default: Warning: Authentication failure. Retrying...    default: Warning: Authentication failure. Retrying...    default: Warning: Authentication failure. Retrying...    default: Warning: Authentication failure. Retrying...    default: Warning: Authentication failure. Retrying...    default: Warning: Authentication failure. Retrying...Timed out while waiting for the machine to boot. This means thatVagrant was unable to communicate with the guest machine withinthe configured (&quot;config.vm.boot_timeout&quot; value) time period.If you look above, you should be able to see the error(s) thatVagrant had when attempting to connect to the machine. These errorsare usually good hints as to what may be wrong.If you&#x27;re using a custom box, make sure that networking is properlyworking and you&#x27;re able to connect to the machine. It is a commonproblem that networking isn&#x27;t setup properly in these boxes.Verify that authentication configurations are also setup properly,as well.If the box appears to be booting properly, you may want to increasethe timeout (&quot;config.vm.boot_timeout&quot;) value.\n\n解决办法 (github issue 参考链接)a. 配置文件增加\n1config.ssh.insert_key = false\nb. 通过安装插件(经测试无效)\n1vagrant plugin install vagrant-rekey-ssh\n\n3 Vagrant was unable to mount VirtualBox shared folders错误提示12345678910111213141516    default: /vagrant =&gt; D:/wamp/Vagrant/kqcVagrant was unable to mount VirtualBox shared folders. This is usuallybecause the filesystem &quot;vboxsf&quot; is not available. This filesystem ismade available via the VirtualBox Guest Additions and kernel module.Please verify that these guest additions are properly installed in theguest. This is not a bug in Vagrant and is usually caused by a faultyVagrant box. For context, the command attemped was:set -emount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3`vagrant /vagrantmount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` vagrant /vagrantThe error output from the command was:mount: unknown filesystem type &#x27;vboxsf&#x27;\n解决办法 (github issue 参考链接)通过安装插件 vagrant-vbguest\n1vagrant plugin install vagrant-vbguest\n\n6. 常用vagrant命令box 镜像管理\n1234vagrant box add vagrant box listvagrant box removevagrant box update\n\nplugin 插件操作\n1234vagrant plugin listvagrant plugin installvagrant plugin uninstallvagrant plugin update\n\npackage\n1vagrant package --base [VBoxName] --output [BoxName]\n机器操作相关\n123456789101112131415161718# 初始化一个目录vagrant init# 启动服务器vagrant up# 关闭服务器vagrant halt# 重启服务器vagrant reload# 查看服务器状态vagrant status# 删除服务器vagrant destroy# 通过ssh登录服务器 (windows 不可用 请使用xshell 或者 putty类似软件)vagrant ssh# 查看服务器登录信息vagrant ssh-config# 查看版本vagrant version\n\n7. 制作自定义box环境说明123windows 64位 旗舰版vagrant 1.8.5virtualbox 5.0.2\n设置环境变量vagrant 会将box文件存储在一个文件件 默认存储在 用户目录的 vagrant.d 文件夹中这个文件夹一般位于C盘 由于我C盘空间不足 我重新定以了这个文件夹路径通过设置环境变量 如下\n\n\n\nKey\nVal\n\n\n\nVAGRANT_HOME\nF:/vagrant/\n\n\n准备VirtualBox 文件安装centos系统安装VirtualBox扩展包安装需要的软件….创建 vagrant 用户 并添加到 sudoer中\n12345678# 添加用户useradd vagrant# 设置密码passwd vagrantvagrant# 添加到 sudoervisudo%vagrant ALL=(ALL) NOPASSWD:ALL\n添加vagrant的公钥到系统\n1234wget https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub -O /home/vagrant/.ssh/authorized_keyschmod 600 /home/vagrant/.ssh/authorized_keys# 关机halt\n\n制作box文件12345# 使用VirtualBox提供的工具VBoxManage list vms# 打包cd VBox 存储虚拟机文件的位置vagrant --base [VBoxName 上面命令列出来的名字] --output [box文件名]\n\n使用12345678# 添加boxvagrant box add [alias] [box文件路径]# 初始化vagrant init [alias]# 配额制文件 添加配置项config.ssh.insert_key = false# 启动vagrant up","dateCreated":"2016-07-26T11:52:04+08:00","dateModified":"2016-08-09T09:20:38+08:00","datePublished":"2016-07-26T11:52:04+08:00","description":"作为统一开发环境的工具 vagrant 是一个类似 docker 的工具但是两者的又有不同的使用场景","headline":"vagrant的安装与使用","image":["logo.jpg","cover.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},"publisher":{"@type":"Organization","name":"fantiq","sameAs":["https://github.com/fantiq"],"image":"avatar.jpg","logo":{"@type":"ImageObject","url":"avatar.jpg"}},"url":"https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/","keywords":"vagrant, docker","thumbnailUrl":"logo.jpg"}</script>
    <meta name="description" content="作为统一开发环境的工具 vagrant 是一个类似 docker 的工具但是两者的又有不同的使用场景">
<meta property="og:type" content="blog">
<meta property="og:title" content="vagrant的安装与使用">
<meta property="og:url" content="https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="代码狗">
<meta property="og:description" content="作为统一开发环境的工具 vagrant 是一个类似 docker 的工具但是两者的又有不同的使用场景">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2016-07-26T03:52:04.000Z">
<meta property="article:modified_time" content="2016-08-09T01:20:38.000Z">
<meta property="article:author" content="fantiq">
<meta property="article:tag" content="vagrant">
<meta property="article:tag" content="docker">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://fantiq.github.io/assets/images/avatar.jpg"/>
    
    
        <meta property="og:image" content="https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/logo.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/logo.jpg"/>
    
    
        <meta property="og:image" content="https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/cover.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/cover.jpg"/>
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-bo1h1ya3kmjmd94f0k5yc43ngmshulfcyc8apgyrr2pfx48g1zk5lyp9do8g.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            代码狗
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">fantiq</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜索"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/fantiq"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-center
                    "
             style="background-image:url('/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/cover.jpg');"
             data-behavior="5">
            
        </div>

            <div id="main" data-behavior="5"
                 class="hasCover
                        hasCoverMetaOut
                        hasCoverCaption">
                
<article class="post">
    
        <span class="post-header-cover-caption caption">vagrant</span>
    
    
        <div class="post-header main-content-wrap text-center">
    
        <h1 class="post-title">
            vagrant的安装与使用
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2016-07-26T11:52:04+08:00">
	
		    7月 26, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>作为统一开发环境的工具 vagrant 是一个类似 docker 的工具但是两者的又有不同的使用场景</p>
<span id="more"></span>
<p>本文所在的环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">windows 64位 旗舰版</span><br><span class="line">vagrant 1.8.5</span><br><span class="line">virtualbox 5.0.2</span><br></pre></td></tr></table></figure>

<h2 id="1-vagrant是什么"><a href="#1-vagrant是什么" class="headerlink" title="1. vagrant是什么?"></a>1. vagrant是什么?</h2><p>vagrant 是一个方便操作 virtualbox 的工具<br>实现原理 virtualbox 是开源的 操作对外提供有api vagrant 通过这些api实现对virtual的操作<br>vagrant 一个方便操作虚拟机的工具 </p>
<h2 id="2-安装虚拟机-vagrant"><a href="#2-安装虚拟机-vagrant" class="headerlink" title="2. 安装虚拟机 vagrant"></a>2. 安装虚拟机 vagrant</h2><p><a target="_blank" rel="noopener" href="https://www.virtualbox.org/wiki/Downloads">下载virtualbox</a><br><a target="_blank" rel="noopener" href="https://www.vagrantup.com/downloads.html">下载vagrant</a><br>vagrant 支持 VMware 虚拟机 但是 VMware 收费 并且 VMware的box文件可下载的也很少 下文只针对 VMware进行讲解</p>
<h2 id="3-下载box镜像"><a href="#3-下载box镜像" class="headerlink" title="3. 下载box镜像"></a>3. 下载box镜像</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 通过官网别名安装</span><br><span class="line">vagrant box add alias</span><br><span class="line"># 通过下载地址 或者 本地box文件路径安装</span><br><span class="line">vagrant box add [alias] &lt;url | path&gt;</span><br></pre></td></tr></table></figure>
<p>镜像地址可以是官方的名称 但是官方的名称就是别名 你不能再通过 –name 指定别名<br>也可以使 url 系在地址 或者 下载box文件到本地 通过指定box文件路径进行安装 (这两个都是可以定义别名的)</p>
<p>这个命令执行后会在你的用户目录创建一个 <code>.vagrant.d</code> 文件夹 里面的<code>boxes</code>文件夹存储你安装的box相关文件<br>包括网络下载的以及本地导入的 都会存储</p>
<h2 id="4-初始化工作目录"><a href="#4-初始化工作目录" class="headerlink" title="4. 初始化工作目录"></a>4. 初始化工作目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant init [alias]</span><br></pre></td></tr></table></figure>
<p>这时候会在当前目录生成配置文件 <code>Vagrantfile</code><br>主要配置文件选项</p>
<h2 id="5-启动虚拟机"><a href="#5-启动虚拟机" class="headerlink" title="5. 启动虚拟机"></a>5. 启动虚拟机</h2><p>对应启动虚拟机时候会遇到如下三个问题</p>
<h4 id="1-“rsync”-could-not-be-found-on-your-PATH"><a href="#1-“rsync”-could-not-be-found-on-your-PATH" class="headerlink" title="1 “rsync” could not be found on your PATH"></a>1 “rsync” could not be found on your PATH</h4><h6 id="错误提示"><a href="#错误提示" class="headerlink" title="错误提示"></a>错误提示</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;rsync&quot; could not be found on your PATH. Make sure that rsync</span><br><span class="line">is properly installed on your system and available on the PATH.</span><br></pre></td></tr></table></figure>

<h6 id="解决方法-github-issue-参考链接"><a href="#解决方法-github-issue-参考链接" class="headerlink" title="解决方法 (github issue 参考链接)"></a>解决方法 (<a target="_blank" rel="noopener" href="https://github.com/mitchellh/vagrant/issues/6696">github issue 参考链接</a>)</h6><p>找到 你下载的 <code>box</code> 镜像文件所在路径 一般是 <code>用户目录\vagrant.d\boxes\镜像名称下的目录\virtualbox\Vagrantfile</code> 将这段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.synced_folder &quot;.&quot;, &quot;/home/vagrant/sync&quot;, type: &quot;rsync&quot;</span><br></pre></td></tr></table></figure>
<p>修改成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.synced_folder &quot;你要共享的目录&quot;, &quot;/home/vagrant/sync&quot;, type: &quot;virtualbox&quot;</span><br></pre></td></tr></table></figure>
<p>或者将这段注释掉</p>
<h4 id="2-Warning-Authentication-failure"><a href="#2-Warning-Authentication-failure" class="headerlink" title="2 Warning: Authentication failure"></a>2 Warning: Authentication failure</h4><h6 id="错误提示-1"><a href="#错误提示-1" class="headerlink" title="错误提示"></a>错误提示</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    .......</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">    default: Warning: Authentication failure. Retrying...</span><br><span class="line">Timed out while waiting for the machine to boot. This means that</span><br><span class="line">Vagrant was unable to communicate with the guest machine within</span><br><span class="line">the configured (&quot;config.vm.boot_timeout&quot; value) time period.</span><br><span class="line"></span><br><span class="line">If you look above, you should be able to see the error(s) that</span><br><span class="line">Vagrant had when attempting to connect to the machine. These errors</span><br><span class="line">are usually good hints as to what may be wrong.</span><br><span class="line"></span><br><span class="line">If you&#x27;re using a custom box, make sure that networking is properly</span><br><span class="line">working and you&#x27;re able to connect to the machine. It is a common</span><br><span class="line">problem that networking isn&#x27;t setup properly in these boxes.</span><br><span class="line">Verify that authentication configurations are also setup properly,</span><br><span class="line">as well.</span><br><span class="line"></span><br><span class="line">If the box appears to be booting properly, you may want to increase</span><br><span class="line">the timeout (&quot;config.vm.boot_timeout&quot;) value.</span><br></pre></td></tr></table></figure>

<h6 id="解决办法-github-issue-参考链接"><a href="#解决办法-github-issue-参考链接" class="headerlink" title="解决办法 (github issue 参考链接)"></a>解决办法 (<a target="_blank" rel="noopener" href="https://github.com/mitchellh/vagrant/issues/5186">github issue 参考链接</a>)</h6><p>a. 配置文件增加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.ssh.insert_key = false</span><br></pre></td></tr></table></figure>
<p>b. 通过安装插件(经测试无效)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant plugin install vagrant-rekey-ssh</span><br></pre></td></tr></table></figure>

<h4 id="3-Vagrant-was-unable-to-mount-VirtualBox-shared-folders"><a href="#3-Vagrant-was-unable-to-mount-VirtualBox-shared-folders" class="headerlink" title="3 Vagrant was unable to mount VirtualBox shared folders"></a>3 Vagrant was unable to mount VirtualBox shared folders</h4><h6 id="错误提示-2"><a href="#错误提示-2" class="headerlink" title="错误提示"></a>错误提示</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    default: /vagrant =&gt; D:/wamp/Vagrant/kqc</span><br><span class="line">Vagrant was unable to mount VirtualBox shared folders. This is usually</span><br><span class="line">because the filesystem &quot;vboxsf&quot; is not available. This filesystem is</span><br><span class="line">made available via the VirtualBox Guest Additions and kernel module.</span><br><span class="line">Please verify that these guest additions are properly installed in the</span><br><span class="line">guest. This is not a bug in Vagrant and is usually caused by a faulty</span><br><span class="line">Vagrant box. For context, the command attemped was:</span><br><span class="line"></span><br><span class="line">set -e</span><br><span class="line">mount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3`</span><br><span class="line">vagrant /vagrant</span><br><span class="line">mount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` vagrant /vagrant</span><br><span class="line"></span><br><span class="line">The error output from the command was:</span><br><span class="line"></span><br><span class="line">mount: unknown filesystem type &#x27;vboxsf&#x27;</span><br></pre></td></tr></table></figure>
<h6 id="解决办法-github-issue-参考链接-1"><a href="#解决办法-github-issue-参考链接-1" class="headerlink" title="解决办法 (github issue 参考链接)"></a>解决办法 (<a target="_blank" rel="noopener" href="https://github.com/mitchellh/vagrant/issues/3341">github issue 参考链接</a>)</h6><p>通过安装插件 <code>vagrant-vbguest</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant plugin install vagrant-vbguest</span><br></pre></td></tr></table></figure>

<h2 id="6-常用vagrant命令"><a href="#6-常用vagrant命令" class="headerlink" title="6. 常用vagrant命令"></a>6. 常用vagrant命令</h2><p>box 镜像管理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add </span><br><span class="line">vagrant box list</span><br><span class="line">vagrant box remove</span><br><span class="line">vagrant box update</span><br></pre></td></tr></table></figure>

<p>plugin 插件操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vagrant plugin list</span><br><span class="line">vagrant plugin install</span><br><span class="line">vagrant plugin uninstall</span><br><span class="line">vagrant plugin update</span><br></pre></td></tr></table></figure>

<p>package</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant package --base [VBoxName] --output [BoxName]</span><br></pre></td></tr></table></figure>
<p>机器操作相关</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 初始化一个目录</span><br><span class="line">vagrant init</span><br><span class="line"># 启动服务器</span><br><span class="line">vagrant up</span><br><span class="line"># 关闭服务器</span><br><span class="line">vagrant halt</span><br><span class="line"># 重启服务器</span><br><span class="line">vagrant reload</span><br><span class="line"># 查看服务器状态</span><br><span class="line">vagrant status</span><br><span class="line"># 删除服务器</span><br><span class="line">vagrant destroy</span><br><span class="line"># 通过ssh登录服务器 (windows 不可用 请使用xshell 或者 putty类似软件)</span><br><span class="line">vagrant ssh</span><br><span class="line"># 查看服务器登录信息</span><br><span class="line">vagrant ssh-config</span><br><span class="line"># 查看版本</span><br><span class="line">vagrant version</span><br></pre></td></tr></table></figure>

<h2 id="7-制作自定义box"><a href="#7-制作自定义box" class="headerlink" title="7. 制作自定义box"></a>7. 制作自定义box</h2><h4 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">windows 64位 旗舰版</span><br><span class="line">vagrant 1.8.5</span><br><span class="line">virtualbox 5.0.2</span><br></pre></td></tr></table></figure>
<h4 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h4><p>vagrant 会将box文件存储在一个文件件 默认存储在 用户目录的 <code>vagrant.d</code> 文件夹中<br>这个文件夹一般位于C盘 由于我C盘空间不足 我重新定以了这个文件夹路径<br>通过设置环境变量 如下</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Val</th>
</tr>
</thead>
<tbody><tr>
<td>VAGRANT_HOME</td>
<td>F:/vagrant/</td>
</tr>
</tbody></table>
<h4 id="准备VirtualBox-文件"><a href="#准备VirtualBox-文件" class="headerlink" title="准备VirtualBox 文件"></a>准备VirtualBox 文件</h4><p>安装centos系统<br>安装VirtualBox扩展包<br>安装需要的软件<br>….<br>创建 vagrant 用户 并添加到 sudoer中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 添加用户</span><br><span class="line">useradd vagrant</span><br><span class="line"># 设置密码</span><br><span class="line">passwd vagrant</span><br><span class="line">vagrant</span><br><span class="line"># 添加到 sudoer</span><br><span class="line">visudo</span><br><span class="line">%vagrant ALL=(ALL) NOPASSWD:ALL</span><br></pre></td></tr></table></figure>
<p>添加vagrant的公钥到系统</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub -O /home/vagrant/.ssh/authorized_keys</span><br><span class="line">chmod 600 /home/vagrant/.ssh/authorized_keys</span><br><span class="line"># 关机</span><br><span class="line">halt</span><br></pre></td></tr></table></figure>

<h4 id="制作box文件"><a href="#制作box文件" class="headerlink" title="制作box文件"></a>制作box文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用VirtualBox提供的工具</span><br><span class="line">VBoxManage list vms</span><br><span class="line"># 打包</span><br><span class="line">cd VBox 存储虚拟机文件的位置</span><br><span class="line">vagrant --base [VBoxName 上面命令列出来的名字] --output [box文件名]</span><br></pre></td></tr></table></figure>

<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 添加box</span><br><span class="line">vagrant box add [alias] [box文件路径]</span><br><span class="line"># 初始化</span><br><span class="line">vagrant init [alias]</span><br><span class="line"># 配额制文件 添加配置项</span><br><span class="line">config.ssh.insert_key = false</span><br><span class="line"># 启动</span><br><span class="line">vagrant up</span><br></pre></td></tr></table></figure>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/docker/" rel="tag">docker</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/vagrant/" rel="tag">vagrant</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2016/08/01/virtualbox-%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%83/"
                    data-tooltip="virtualbox 搭建LNMP环境"
                    aria-label="上一篇: virtualbox 搭建LNMP环境"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2016/07/08/%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E8%A7%A6%E5%8F%91%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%8D%E6%9D%82%E8%AF%B7%E6%B1%82/"
                    data-tooltip="跨域请求触发浏览器复杂请求"
                    aria-label="下一篇: 跨域请求触发浏览器复杂请求"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                    title="分享到 Google+"
                    aria-label="分享到 Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 fantiq. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2016/08/01/virtualbox-%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%83/"
                    data-tooltip="virtualbox 搭建LNMP环境"
                    aria-label="上一篇: virtualbox 搭建LNMP环境"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2016/07/08/%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E8%A7%A6%E5%8F%91%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%8D%E6%9D%82%E8%AF%B7%E6%B1%82/"
                    data-tooltip="跨域请求触发浏览器复杂请求"
                    aria-label="下一篇: 跨域请求触发浏览器复杂请求"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                    title="分享到 Google+"
                    aria-label="分享到 Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://fantiq.github.io/2016/07/26/vagrant%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"
                        aria-label="分享到 Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>分享到 Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="作者的图片"/>
        
            <h4 id="about-card-name">fantiq</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                China HangZhou
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-ffzlst6ssezilzbbgybxfwuegfobjsmomzthas0h8hymsrrzox2o6dre4owp.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
